!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["pat-sajax"]=t():e["pat-sajax"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){function e(e,t){var r="";try{var n=new s["default"](e+":"+t),a=n.toBase64();r={Authorization:"Basic "+a}}catch(o){throw o}return r}function t(t,n,a,o){var i=t.concat(r);if(n){for(var s=e(n.username,n.password),u=0;u<i.length;u++)i[u].Authorization&&i.splice(u,1);i.push(s)}else a&&o&&(i.push({username:a}),i.push({password:o}));return i}var r=[];return{setDefaultHeaders:function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments[1];if(!Array.isArray(t))return console.error("Unexpected data type for headers"),!1;if(n){if(!n.username||!n.password)return console.error("Invalid basicAuth object passed to setDefaultHeaders()"),void(r=t);var a=e(n.username,n.password);r.push(a)}else r=t},send:function(e,r){var n=!1,a=r.responseType||"",i=r.method||"GET",s=r.body||void 0,u=r.basicAuth||void 0,h=r.user||void 0,f=r.password||void 0,c=r.headers||[];Array.isArray(c)||(console.error("Expected array in options.headers. Received "+("undefined"==typeof c?"undefined":o(c))),n=!0),s&&"string"!=typeof s&&(s=JSON.stringify(s));var d=t(c,u,h,f);if(u){var g=/^https:/;g.test(e)||console.warn("Are you sending credentials over http? That's a terrible idea.")}var l=new Promise(function(t,r){n&&r({status:400,statusText:"Error creating request. Check options object."});var o=new XMLHttpRequest;o.responseType=a,o.open(i,e,!0),d.forEach(function(e){var t=Object.keys(e)[0];o.setRequestHeader(t,e[t])}),s?o.send(s):o.send(),o.onload=function(){t({status:this.status,statusText:this.statusText,response:this.response})},o.onerror=function(){r({status:this.status,statusText:this.statusText})}});return l},get:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.method="GET",this.send(e,t)},post:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r.method="POST",r.body=t,this.send(e,r)},del:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.method="DELETE",this.send(e,t)},put:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.method="PUT",this.send(e,t)},getJSON:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.method="GET",new Promise(function(n,a){t.send(e,r).then(function(e){var t={status:e.status,statusText:e.statusText,response:void 0,originalResponse:e.response};"string"===!o(e.response)&&(console.error("Cannot parse. Expected string, received "+o(e.response)),a(t)),t.response=JSON.parse(e.response),n(t)})["catch"](function(e){a(e)})})},spinTheWheel:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2];if(!e||"number"!=typeof e)throw"Invalid parameter: timeout. Expected number, received "+("undefined"==typeof e?"undefined":o(e));return""===r&&(r=t?"A BRAND NEW CAR":"BANKRUPT"),new Promise(function(n,a){t?setTimeout(n(r),e):setTimeout(a(r),e)})}}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=a;var i=r(1),s=n(i)},function(e,t){"use strict";function r(e,t,a,o){var i,s,u,h,f,c,d=isFinite(a)?a:0,g=15;t&&(this.encoding=t.toString());e:switch(this.encoding){case"UTF-8":h=r.putUTF8CharCode,f=r.getUTF8CharLength,i=Uint8Array;break e;case"UTF-16":h=r.putUTF16CharCode,f=r.getUTF16CharLength,i=Uint16Array;break e;case"UTF-32":i=Uint32Array,g&=14;break e;default:i=Uint8Array,g&=14}e:switch("undefined"==typeof e?"undefined":n(e)){case"string":g&=7;break e;case"object":switch(e.constructor){case r:g&=3;break e;case String:g&=7;break e;case ArrayBuffer:s=new i(e),c="UTF-32"===this.encoding?e.byteLength>>>2:"UTF-16"===this.encoding?e.byteLength>>>1:e.byteLength,u=0!==d||isFinite(o)&&o!==c?new i(e,d,isFinite(o)?o:c-d):s;break e;case Uint32Array:case Uint16Array:case Uint8Array:i=e.constructor,c=e.length,s=0===e.byteOffset&&e.length===(i===Uint32Array?e.buffer.byteLength>>>2:i===Uint16Array?e.buffer.byteLength>>>1:e.buffer.byteLength)?e:new i(e.buffer),u=0!==d||isFinite(o)&&o!==c?e.subarray(d,isFinite(o)?d+o:c):e;break e;default:s=new i(e),c=s.length,u=0!==d||isFinite(o)&&o!==c?s.subarray(d,isFinite(o)?d+o:c):s}break e;default:s=u=new i(Number(e)||0)}if(8>g){var l,p,y,b,T,v,U;4&g?(l=e,p=c=l.length,g^="UTF-32"===this.encoding?0:2,d=y=a?Math.max((p+a)%p,0):0,T=b=(Number.isInteger(o)?Math.min(Math.max(o,0)+d,p):p)-1):(l=e.rawData,c=e.makeIndex(),d=y=a?Math.max((c+a)%c,0):0,p=Number.isInteger(o)?Math.min(Math.max(o,0),c-y):c,T=b=p+y,"UTF-8"===e.encoding?(v=r.getUTF8CharLength,U=r.loadUTF8CharCode):"UTF-16"===e.encoding?(v=r.getUTF16CharLength,U=r.loadUTF16CharCode):g&=1),(0===p||4>g&&l.encoding===this.encoding&&0===y&&p===c)&&(g=7);e:switch(g){case 0:s=new i(p);for(var m=0;p>m;s[m]=l[d+m++]);break e;case 1:p=0;for(var F=d;T>F;F++)p+=f(l[F]);s=new i(p);for(var F=d,m=0;p>m;F++)m=h(s,l[F],m);break e;case 2:d=0;var w;for(C=0;y>C;C++)w=U(l,d),d+=v(w);s=new i(p);for(var F=d,m=0;p>m;F+=v(w),m++)w=U(l,F),s[m]=w;break e;case 3:p=0;for(var w,C=0,F=0;b>C;F+=v(w))w=U(l,F),C===y&&(d=F),++C>y&&(p+=f(w));s=new i(p);for(var F=d,m=0;p>m;F+=v(w))w=U(l,F),m=h(s,w,m);break e;case 4:s=new i(p);for(var A=0;p>A;A++)s[A]=255&l.charCodeAt(A);break e;case 5:p=0;for(var x=0;c>x;x++)x===y&&(d=p),p+=f(l.charCodeAt(x)),x===b&&(T=p);s=new i(p);for(var m=0,C=0;p>m;C++)m=h(s,l.charCodeAt(C),m);break e;case 6:s=new i(p);for(var A=0;p>A;A++)s[A]=l.charCodeAt(A);break e;case 7:s=new i(p?l:0)}u=g>3&&(d>0||T<s.length-1)?s.subarray(d,T):s}this.buffer=s.buffer,this.bufferView=s,this.rawData=u,Object.freeze(this)}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=r,Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&e>-9007199254740992&&9007199254740992>e&&Math.floor(e)===e}),r.loadUTF8CharCode=function(e,t){var r=e.length,n=e[t];return n>251&&254>n&&r>t+5?1073741824*(n-252)+(e[t+1]-128<<24)+(e[t+2]-128<<18)+(e[t+3]-128<<12)+(e[t+4]-128<<6)+e[t+5]-128:n>247&&252>n&&r>t+4?(n-248<<24)+(e[t+1]-128<<18)+(e[t+2]-128<<12)+(e[t+3]-128<<6)+e[t+4]-128:n>239&&248>n&&r>t+3?(n-240<<18)+(e[t+1]-128<<12)+(e[t+2]-128<<6)+e[t+3]-128:n>223&&240>n&&r>t+2?(n-224<<12)+(e[t+1]-128<<6)+e[t+2]-128:n>191&&224>n&&r>t+1?(n-192<<6)+e[t+1]-128:n},r.putUTF8CharCode=function(e,t,r){var n=r;return 128>t?e[n++]=t:2048>t?(e[n++]=192+(t>>>6),e[n++]=128+(63&t)):65536>t?(e[n++]=224+(t>>>12),e[n++]=128+(t>>>6&63),e[n++]=128+(63&t)):2097152>t?(e[n++]=240+(t>>>18),e[n++]=128+(t>>>12&63),e[n++]=128+(t>>>6&63),e[n++]=128+(63&t)):67108864>t?(e[n++]=248+(t>>>24),e[n++]=128+(t>>>18&63),e[n++]=128+(t>>>12&63),e[n++]=128+(t>>>6&63),e[n++]=128+(63&t)):(e[n++]=252+t/1073741824,e[n++]=128+(t>>>24&63),e[n++]=128+(t>>>18&63),e[n++]=128+(t>>>12&63),e[n++]=128+(t>>>6&63),e[n++]=128+(63&t)),n},r.getUTF8CharLength=function(e){return 128>e?1:2048>e?2:65536>e?3:2097152>e?4:67108864>e?5:6},r.loadUTF16CharCode=function(e,t){var r=e[t];return r>55231&&t+1<e.length?(r-55296<<10)+e[t+1]+9216:r},r.putUTF16CharCode=function(e,t,r){var n=r;return 65536>t?e[n++]=t:(e[n++]=55232+(t>>>10),e[n++]=56320+(1023&t)),n},r.getUTF16CharLength=function(e){return 65536>e?1:2},r.b64ToUint6=function(e){return e>64&&91>e?e-65:e>96&&123>e?e-71:e>47&&58>e?e+4:43===e?62:47===e?63:0},r.uint6ToB64=function(e){return 26>e?e+65:52>e?e+71:62>e?e-4:62===e?43:63===e?47:65},r.bytesToBase64=function(e){for(var t,n="",a=e.length,o=0,i=0;a>i;i++)t=i%3,i>0&&4*i/3%76===0&&(n+="\r\n"),o|=e[i]<<(16>>>t&24),2!==t&&e.length-i!==1||(n+=String.fromCharCode(r.uint6ToB64(o>>>18&63),r.uint6ToB64(o>>>12&63),r.uint6ToB64(o>>>6&63),r.uint6ToB64(63&o)),o=0);return n.replace(/A(?=A$|$)/g,"=")},r.base64ToBytes=function(e,t){for(var n,a,o=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=o.length,s=t?Math.ceil((3*i+1>>>2)/t)*t:3*i+1>>>2,u=new Uint8Array(s),h=0,f=0,c=0;i>c;c++)if(a=3&c,h|=r.b64ToUint6(o.charCodeAt(c))<<18-6*a,3===a||i-c===1){for(n=0;3>n&&s>f;n++,f++)u[f]=h>>>(16>>>n&24)&255;h=0}return u},r.makeFromBase64=function(e,t,n,a){return new r("UTF-16"===t||"UTF-32"===t?r.base64ToBytes(e,"UTF-16"===t?2:4).buffer:r.base64ToBytes(e),t,n,a)},r.prototype.encoding="UTF-8",r.prototype.makeIndex=function(e,t){var r,n=this.rawData,a=n.length,o=t||0,i=o,s=isNaN(e)?1/0:e;if(e+1>n.length)throw new RangeError("StringView.prototype.makeIndex - The offset can't be major than the length of the array - 1.");switch(this.encoding){case"UTF-8":var u;for(r=0;a>i&&s>r;r++)u=n[i],i+=u>251&&254>u&&a>i+5?6:u>247&&252>u&&a>i+4?5:u>239&&248>u&&a>i+3?4:u>223&&240>u&&a>i+2?3:u>191&&224>u&&a>i+1?2:1;break;case"UTF-16":for(r=o;a>i&&s>r;r++)i+=n[i]>55231&&i+1<n.length?2:1;break;default:i=r=isFinite(e)?e:a-1}return e?i:r},r.prototype.toBase64=function(e){return r.bytesToBase64(e?this.bufferView.constructor===Uint8Array?this.bufferView:new Uint8Array(this.buffer):this.rawData.constructor===Uint8Array?this.rawData:new Uint8Array(this.buffer,this.rawData.byteOffset,this.rawData.length<<(this.rawData.constructor===Uint16Array?1:2)))},r.prototype.subview=function(e,t){var n,a,o,i,s="UTF-8"===this.encoding||"UTF-16"===this.encoding,u=e,h=this.rawData.length;return 0===h?new r(this.buffer,this.encoding):(i=s?this.makeIndex():h,a=e?Math.max((i+e)%i,0):0,o=Number.isInteger(t)?Math.max(t,0)+a>i?i-a:t:i,0===a&&o===i?this:(s?(u=this.makeIndex(a),n=this.makeIndex(o,u)-u):(u=a,n=o-a),"UTF-16"===this.encoding?u<<=1:"UTF-32"===this.encoding&&(u<<=2),new r(this.buffer,this.encoding,u,n)))},r.prototype.forEachChar=function(e,t,n,a){var o,i,s=this.rawData;if("UTF-8"===this.encoding||"UTF-16"===this.encoding){var u,h;"UTF-8"===this.encoding?(u=r.getUTF8CharLength,h=r.loadUTF8CharCode):"UTF-16"===this.encoding&&(u=r.getUTF16CharLength,h=r.loadUTF16CharCode),i=isFinite(n)?this.makeIndex(n):0,o=isFinite(a)?this.makeIndex(a,i):s.length;for(var f,c=0;o>i;c++)f=h(s,i),e.call(t||null,f,c,i,s),i+=u(f)}else for(i=isFinite(n)?n:0,o=isFinite(a)?a+i:s.length,i;o>i;i++)e.call(t||null,s[i],i,i,s)},r.prototype.valueOf=r.prototype.toString=function(){if("UTF-8"!==this.encoding&&"UTF-16"!==this.encoding)return String.fromCharCode.apply(null,this.rawData);var e,t,n="";"UTF-8"===this.encoding?(t=r.getUTF8CharLength,e=r.loadUTF8CharCode):"UTF-16"===this.encoding&&(t=r.getUTF16CharLength,e=r.loadUTF16CharCode);for(var a,o=this.rawData.length,i=0;o>i;i+=t(a))a=e(this.rawData,i),n+=String.fromCharCode(a);return n}}])});